<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Add a Custom View | Kaoto</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="How to add a custom view for specific steps."><meta name=author content="Kaoto Team"><meta name=generator content="Hugo 0.101.0"><style>:root{--primary-color:#41228e}</style><link rel=stylesheet href=https://kaoto.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://kaoto.io/plugins/slick/slick.css><link rel=stylesheet href=https://kaoto.io/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://kaoto.io/css/style.min.css media=screen><link rel=stylesheet href=https://kaoto.io/css/custom.css media=screen><link rel="shortcut icon" href=https://kaoto.io/images/favicon.ico type=image/x-icon><link rel=icon href=https://kaoto.io/images/favicon.ico type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-BP1PVX7HSK"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-BP1PVX7HSK")</script></head><body><div class=preloader><img src=/images/preloader.gif alt=preloader></div><header class="navigation fixed-top"><nav class="navbar navbar-expand-lg navbar-dark"><a class=navbar-brand href=https://kaoto.io/><h3 class="text-white font-tertiary">Kaoto</h3></a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://kaoto.io/></a></li><li class=nav-item><a class=nav-link href=https://kaoto.io/about>About</a></li><li class=nav-item><a class=nav-link href=https://kaoto.io/blog>Blog</a></li><li class=nav-item><a class=nav-link href=https://kaoto.io/quickstart>Quick Start</a></li><li class=nav-item><a class=nav-link href=https://kaoto.io/docs>Docs</a></li><li class=nav-item><a class=nav-link href=https://kaoto.io/portfolio>Use Cases</a></li></ul></div></nav></header><section class="page-title bg-primary position-relative overflow-hidden"><div class=container><div class=row><div class="col-12 text-center"><h1 class="text-white font-tertiary">Add a Custom View</h1></div></div></div><img src=/images/illustrations/page-title.png alt=illustrations class="bg-shape-1 w-100">
<img src=/images/illustrations/leaf-pink-round.svg alt=illustrations class=bg-shape-2>
<img src=/images/illustrations/dots-cyan.svg alt=illustrations class=bg-shape-3>
<img src=/images/illustrations/leaf-orange.svg alt=illustrations class=bg-shape-4>
<img src=/images/illustrations/leaf-yellow.svg alt=illustrations class=bg-shape-5>
<img src=/images/illustrations/dots-group-cyan.svg alt=illustrations class=bg-shape-6>
<img src=/images/illustrations/leaf-cyan-lg.svg alt=illustrations class=bg-shape-7></section><section class=section><div class=container><div class="row justify-content-center"><div class="col-lg-9 text-center mb-4"><img src=https://kaoto.io/images/step-extension.png alt="Add a Custom View" class="img-fluid rounded mb-4"><p class=font-secondary>Published on 10 Jan 2022 by <span class=text-primary>Kaoto Team</span></p></div><div class=col-lg-9><div class=content><p>Kaoto&rsquo;s frontend is extendable, allowing you to create custom views. You
can configure Kaoto to show a specific view instead of the generic form to configure properties in a step.
We call these custom views <strong>Step Extensions</strong>.</p><p>Kaoto has an <strong>Step Extension API</strong> to interact with the main application. This API can
be used to control deployments remotely, or to do some kind of data transformation
with the output of a particular step.</p><p>There are two main changes when adding a new step extension:</p><ol><li>The Step Extension itself, which is a remote application implemented by you.</li><li>The View Definition catalog, that lists all available views and extensions.</li></ol><h2 id=implementing-a-step-extension>Implementing a Step Extension</h2><p>A Step Extension is a web application that uses Webpack 4.x or later.</p><p>This can even be in the form of built static files. In fact, this is
how we are able to host our <a href=https://step-extension.netlify.app/ target=_blank>example</a>
on
Netlify. You can use the <a href=https://github.com/KaotoIO/step-extension target=_blank>example extension</a>
as a template.</p><p>Or maybe you already have an external application that you&rsquo;d like to have
embedded within Kaoto. Then you can <a href=#view-definition-catalog>skip to the View Definition section directly</a>
.</p><h3 id=under-the-hood>Under the Hood</h3><p>As we are using <a href=https://webpack.js.org/concepts/module-federation/ target=_blank>module federation</a>
, your
application need to use Webpack 4.x or later. Webpack can be used with other tools like Rollup.
Or you can use it just for module federation if you choose to.</p><p>If you&rsquo;re not familiar with the concept of module federation, don&rsquo;t worry.
The important thing to know is that it gives you the flexibility to
deploy your application independently, so Kaoto don&rsquo;t need to be
restarted.</p><p>Dependency alignment is not needed with module federation. You can specify
whether you want to share a particular version of a framework, like React,
or if you want to use your own.</p><h3 id=enabling-module-federation-in-your-app>Enabling Module Federation in Your App</h3><p>One of the biggest benefits of using module federation is that it works just
like any other <code>import</code>. This means <strong>you don&rsquo;t have to make any alterations
to an existing code base</strong>. It&rsquo;s simply a matter of configuring it.</p><p>When you enable module federation, your <code>webpack.config.js</code> file will look
something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>HtmlWebPackPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;html-webpack-plugin&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ModuleFederationPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;webpack/lib/container/ModuleFederationPlugin&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deps</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;./package.json&#34;</span>).<span style=color:#a6e22e>dependencies</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>devServer</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>port</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3000</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>historyApiFallback</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>publicPath</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;http://localhost:3000/&#34;</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resolve</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>extensions</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;.tsx&#34;</span>, <span style=color:#e6db74>&#34;.ts&#34;</span>, <span style=color:#e6db74>&#34;.jsx&#34;</span>, <span style=color:#e6db74>&#34;.js&#34;</span>, <span style=color:#e6db74>&#34;.json&#34;</span>],
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>ModuleFederationPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;funapp&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;remoteEntry.js&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>exposes</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;./FunComponent&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/FunComponent&#34;</span>,
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>shared</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        ...<span style=color:#a6e22e>deps</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>react</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>singleton</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>requiredVersion</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>deps</span>.<span style=color:#a6e22e>react</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;react-dom&#34;</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>singleton</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>requiredVersion</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>deps</span>[<span style=color:#e6db74>&#34;react-dom&#34;</span>],
</span></span><span style=display:flex><span>        }, },
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebPackPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/index.html&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Some important things to note is the <code>ModuleFederationPlugin</code>, which comes
built into Webpack. In it, you have a few properties that are relevant:</p><ul><li><code>name</code>: The name of your application. This cannot conflict with another
Step Extension <code>name</code> in the catalog.</li><li><code>filename</code>: This is the name of your remote entry file, which is usually
<code>remoteEntry.js</code>.</li><li><code>exposes</code>: The files this application will expose to Kaoto. Typically,
this will be a single component. In this example, we are sharing a component
called <code>FunComponent</code>.</li><li><code>shared</code>: Any libraries you want to share with Kaoto.</li></ul><p>There are other options we won&rsquo;t go into, but these are the basics.</p><p>You can learn more about the <a href=/docs/step-extension-api>Step Extension API here</a>
.</p><h2 id=view-definition-catalog>View Definition Catalog</h2><p>Kaoto uses a repository of configuration files to determine what
views should the frontend use and when. To make Kaoto aware of your Step Extension,
you need to add a configuration file with your extension.</p><p>First, you will have to fork
<a href=https://github.com/KaotoIO/kaoto-viewdefinition-catalog target=_blank>the catalog being used by default</a>
to be able to include your configuration file while you develop it.</p><p>Then you will need to
<a href=https://github.com/KaotoIO/kaoto-backend/blob/main/api/src/main/resources/application.yaml#L8 target=_blank>configure your backend to use your forked View Definition catalog</a>
.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#f92672>repository</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>  <span style=color:#f92672>step</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    [<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>  <span style=color:#f92672>viewdefinition</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>    <span style=color:#f92672>jar</span>:
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>      - <span style=color:#e6db74>&#34;https://github.com/YourUser/YourRepository/archive/refs/heads/main.zip&#34;</span>
</span></span></code></pre></div><p>Now you need to create a configuration file for your step extension. You can use
one of the <a href=https://github.com/KaotoIO/kaoto-viewdefinition-catalog target=_blank>existing files as template</a>
.</p><p>For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Fun Component</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#f92672>id</span>: <span style=color:#ae81ff>detail-step</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>step</span>
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#f92672>url</span>: <span style=color:#ae81ff>http://localhost:8080</span>
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#f92672>module</span>: <span style=color:#e6db74>&#39;./FunComponent&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#f92672>scope</span>: <span style=color:#e6db74>&#39;funapp&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#f92672>constraints</span>: 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>   -
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>      <span style=color:#f92672>mandatory</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>      <span style=color:#f92672>operation</span>: <span style=color:#ae81ff>CONTAINS_STEP_NAME</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>      <span style=color:#f92672>parameter</span>: <span style=color:#ae81ff>twitter-search-source      </span>
</span></span></code></pre></div><p>Most of these properties are simply mapping to the <code>ModuleFederationPlugin</code>
properties we&rsquo;ve just defined above:</p><ul><li><code>name</code> is what will appear as the label of the new tab of the component</li><li><code>url</code> is where your application is running</li><li><code>module</code> here corresponds to the <code>exposes</code> object, or the components
you&rsquo;re exposing.</li><li><code>scope</code> MUST match the <code>name</code> of your application that we defined earlier</li><li><code>constraints</code> defines when the extension will be shown. In this
example, the extension will be shown when configuring the
<code>twitter-search-source</code> step. It will appear as a new &ldquo;Fun Component&rdquo;
tab when you click on it in the Visualization.</li></ul><p>It is important that the <code>url</code> points to where you have deployed the extension
implemented in the previous step.</p><h2 id=putting-it-all-together>Putting it All Together</h2><p>You should now have an application that has Webpack Module Federation
enabled, with a defined component that you want to stream to Kaoto.
Start Kaoto as usual, ensuring that it is pointing to the correct View
Definition catalog.</p><p>You can now proceed to the <a href=/docs/step-extension-api>Step Extension API</a>
documentation to make your extension more interesting.</p></div></div></div></div></section><footer class="bg-dark footer-section"><div class=section><div class=container><div class=row><div class=col-md-4><h5 class=text-light>Email</h5><p class="text-white paragraph-lg font-secondary"><a href=mailto:hellokaoto@gmail.com>hellokaoto@gmail.com</a></p></div><div class=col-md-4><h5 class=text-light>Source Code</h5><p class="text-white paragraph-lg font-secondary"><a href=https://github.com/KaotoIO rel="nofollow noopener" target=_blank>KaotoIO</a></p></div><div class=col-md-4><h5 class=text-light>Twitter</h5><p class="text-white paragraph-lg font-secondary"><a href=https://www.twitter.com/KaotoIO rel="nofollow noopener" target=_blank>KaotoIO</a></p></div></div></div></div><div class="footer-bottom border-top text-center border-dark py-5"><p class="mb-0 text-light">Copyright 2022 © Kaoto</p></div></footer><script src=https://kaoto.io/plugins/jQuery/jquery.min.js></script>
<script src=https://kaoto.io/plugins/bootstrap/bootstrap.min.js></script>
<script src=https://kaoto.io/plugins/slick/slick.min.js></script>
<script src=https://kaoto.io/plugins/shuffle/shuffle.min.js></script>
<script src=https://kaoto.io/js/script.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js></script><div id=js-cookie-box class="cookie-box cookie-box-hide">This site uses cookies. By continuing to use this website, you agree to their use. <span id=js-cookie-button class="btn btn-sm btn-primary ml-2">I Accept</span></div><script>(function(){const t=document.getElementById("js-cookie-box"),n=document.getElementById("js-cookie-button");Cookies.get("cookie-box")||(t.classList.remove("cookie-box-hide"),n.onclick=function(){Cookies.set("cookie-box",!0,{expires:2}),t.classList.add("cookie-box-hide")})})(jQuery)</script><style>.cookie-box{position:fixed;left:0;right:0;bottom:0;text-align:center;z-index:9999;padding:1rem 2rem;background:#474747;transition:all .75s cubic-bezier(.19,1,.22,1);color:#fdfdfd}.cookie-box-hide{display:none}</style></body></html>